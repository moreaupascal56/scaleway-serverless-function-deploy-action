---
name: Test Action

on: [push]

jobs:
  test_action:
    runs-on: ubuntu-latest
    name: Test Action
    env:
      SCW_REGION: fr-par
      SCW_FUNCTION_NAME: hello-world
      SCW_NAMESPACE_ID: edb6f264-dbfc-4346-8201-12f9d3a9ce5b
      SCW_RUNTIME: python311
    steps:
      - uses: moreaupascal56/scaleway-serverless-deploy-action@main
        with:
          SCW_ACCESS_KEY: ${{ secrets.SCW_ACCESS_KEY }}
          SCW_SECRET_KEY: ${{ secrets.SCW_SECRET_KEY }}
          SCW_DEFAULT_PROJECT_ID: ${{ secrets.SCW_DEFAULT_PROJECT_ID }}
          SCW_DEFAULT_ORGANIZATION_ID: ${{ secrets.SCW_DEFAULT_ORGANIZATION_ID }}

          SCW_REGION: ${{ env.SCW_REGION }}
          SCW_FUNCTION_NAME: ${{ env.SCW_FUNCTION_NAME }}
          SCW_NAMESPACE_ID: ${{ env.SCW_NAMESPACE_ID }}
          SCW_RUNTIME: ${{ env.SCW_RUNTIME }}


          function_root: tests/src
          requirements_txt_path: tests/requirements.txt

